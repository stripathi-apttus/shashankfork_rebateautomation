/*
 * This file was generated by the Gradle 'init' task.
 */
 
apply plugin: 'java'
apply plugin: 'maven'


group = 'com.apttus.sfdc'
version = '0.0.1-SNAPSHOT'
description = 'RebatesSFDC'
sourceCompatibility = '1.8'


sourceCompatibility = 1.8
targetCompatibility = 1.8
tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}


def regression = project.hasProperty("regression")
def smoke = project.hasProperty("smoke")

def settingsUsername
def settingsPassword


def getMavenSettingsCredentials = {
    String userHome = System.getProperty( "user.home" );
    File mavenSettings = new File(userHome, ".m2/settings.xml")
    def xmlSlurper = new XmlSlurper()
    def output = xmlSlurper.parse(mavenSettings)
    return output."servers"."server"
}

//this will fetch the credentials from the settings.xml
def getCredentials = {
    def entries = getMavenSettingsCredentials()
    for (entry in entries) {
		settingsUsername=entry.username.text()
		settingsPassword=entry.password.text()
    
  }
}


repositories {
def creds = getCredentials()
 maven {
        credentials {
             username settingsUsername
            password settingsPassword
        }
        url "http://art01.apttuscloud.io/libs-release"
    }
	
	
    maven { url "http://dl.bintray.com/epam/reportportal" }
}
dependencies {
    compile 'org.seleniumhq.selenium:selenium-java:3.141.59'
    compile 'com.google.code.gson:gson:2.8.5'
    compile group: 'com.apttus.automation', name: 'apttusautomation', version:'15.0.5'
    compile 'com.apttus.sfdc:rudiments:0.0.8'
    compile 'com.jayway.restassured:rest-assured:2.9.0'
    compile 'com.googlecode.json-simple:json-simple:1.1.1'
    compile 'com.github.javafaker:javafaker:0.17.2'
    compile 'com.google.apis:google-api-services-gmail:v1-rev30-1.20.0'
    compile 'com.google.oauth-client:google-oauth-client:1.23.0'
    compile 'com.google.api-client:google-api-client:1.23.0'
    compile 'javax.mail:mail:1.4'
    compile 'com.google.oauth-client:google-oauth-client-java6:1.23.0'
    compile 'com.google.oauth-client:google-oauth-client-jetty:1.23.0'
    compile 'org.apache.commons:commons-io:1.3.2'
    compile 'commons-io:commons-io:2.5'
    compile 'com.aventstack:extentreports:3.0.7'
    compile 'xerces:xercesImpl:2.11.0'
    testCompile 'org.hamcrest:hamcrest:2.1'
    compile group: 'org.testng', name: 'testng', version: '7.0.0'
}


test {
    useTestNG() {

        if(smoke) {
              suites smokeTests
        }
		if(regression) {
              suites regressionTests
        }
		
    
    }
	}